(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(1),a=t(15),i=t.n(a),r=(t(21),t(6)),u=t(3),d=function(e){var n=e.filter,t=e.handleFilterChange;return Object(o.jsxs)("div",{children:["Search: ",Object(o.jsx)("input",{id:"search",value:n,onChange:t,autoComplete:"off"})]})},s=function(e){var n=e.filter,t=e.persons,c=e.handleDelete,a=0===n.length?t:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return Object(o.jsx)("ul",{children:a.map((function(e){return Object(o.jsxs)("li",{children:[e.name,": ",e.phone," ",Object(o.jsx)("button",{onClick:function(){return c(e.id)},children:"Remove"})]},e.id)}))})},l=function(e){return Object(o.jsxs)("form",{id:"addPersonForm",onSubmit:e.addPerson,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{id:"nameField",value:e.newName,onChange:e.handleNameChange,autoComplete:"off"})]}),Object(o.jsxs)("div",{children:["phone number: ",Object(o.jsx)("input",{id:"numberField",value:e.newPhone,onChange:e.handlePhoneChange,autoComplete:"off"})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{id:"submitForm",type:"submit",children:"add"})})]})},f=t(4),h=t.n(f),j="/api/persons",b=function(){return h.a.get(j)},m=function(e){return h.a.post(j,e)},O=function(e,n){return console.log(e,n),h.a.put("".concat(j,"/").concat(e),n)},p=function(e){return h.a.delete("".concat(j,"/").concat(e))},v=(t(39),function(e){var n=e.notificationMessage;if(null===n)return null;var t=n.includes("Added")?"successMessage":"errorMessage";return Object(o.jsx)("div",{className:t,children:n})}),x=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(""),f=Object(u.a)(i,2),h=f[0],j=f[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),w=g[0],C=g[1],P=Object(c.useState)(""),k=Object(u.a)(P,2),S=k[0],D=k[1],y=Object(c.useState)(null),F=Object(u.a)(y,2),N=F[0],M=F[1],A=function(e){M(e),setTimeout((function(){M(null)}),5e3)};Object(c.useEffect)((function(){b().then((function(e){a(e.data)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(v,{notificationMessage:N}),Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{handleFilterChange:function(e){D(e.target.value)},filter:S}),Object(o.jsx)("h3",{children:"Add a new contact"}),Object(o.jsx)(l,{addPerson:function(e){var n={name:h,date:(new Date).toDateString(),id:t.reduce((function(e,n){return e.id>n.id?e:n})).id+1,phone:w};if(t.some((function(e){return e.name===h}))){if(window.confirm("".concat(h," already exists, do you want to update the phone number?"))){e.preventDefault();var o=t.find((function(e){return e.name===h})),c=Object(r.a)(Object(r.a)({},o),{},{phone:w});O(o.id,c).then((function(e){console.log(e),a(t.map((function(n){return n.name!==h?n:e.data}))),j(""),C("")}))}}else e.preventDefault(),m(n).then((function(e){a(t.concat(e.data)),j(""),C(""),A("Added ".concat(n.name," to the Phonebook"))}))},newName:h,newPhone:w,handleNameChange:function(e){j(e.target.value)},handlePhoneChange:function(e){C(e.target.value)}}),Object(o.jsx)("h2",{children:"Contacts"}),Object(o.jsx)(s,{persons:t,filter:S,handleDelete:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Do you want to delete ".concat(n,"?"))&&p(e).then((function(o){a(t.filter((function(n){return n.id!=e}))),A("Removed ".concat(n," from Phonebook"))})).catch((function(o){A("".concat(n," was already deleted from the Phonebook")),a(t.filter((function(n){return n.id!=e})))}))}})]})};i.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.545292cb.chunk.js.map